const _0x29eca7=_0x3225;(function(_0x55c7f4,_0x8d679a){const _0x505d25=_0x3225,_0x3a38df=_0x55c7f4();while(!![]){try{const _0x2ede0f=parseInt(_0x505d25(0x1a7))/(0x2510+-0xbda*0x1+-0x1935)+parseInt(_0x505d25(0x1a8))/(0x2063+-0x5e*-0x25+-0x1*0x2df7)+parseInt(_0x505d25(0x18f))/(-0x8d4*-0x3+-0xcb*0x31+0xc62*0x1)+parseInt(_0x505d25(0x190))/(0xd*-0x232+-0x155d*0x1+0x31eb)+parseInt(_0x505d25(0x1bf))/(0x473+-0x23c4+0x1f56)+parseInt(_0x505d25(0x1c0))/(-0x6*-0x195+-0x43*0x6a+0x1246)+-parseInt(_0x505d25(0x1a2))/(-0x2b*-0x5b+0x1421*-0x1+-0x2b*-0x1d);if(_0x2ede0f===_0x8d679a)break;else _0x3a38df['push'](_0x3a38df['shift']());}catch(_0x4ed05b){_0x3a38df['push'](_0x3a38df['shift']());}}}(_0x1201,0x66038+0xd19d3+-0x69b22));const qiniu=require(_0x29eca7(0x1b8)),ffmpeg=require('fluent-ffm'+_0x29eca7(0x189)),ffmpegPath=require(_0x29eca7(0x1be)+'staller/ff'+_0x29eca7(0x18e))['path'],ffprobePath=require(_0x29eca7(0x196)+_0x29eca7(0x180)+_0x29eca7(0x1b0))[_0x29eca7(0x19e)];ffmpeg[_0x29eca7(0x19a)+_0x29eca7(0x19f)](ffmpegPath),ffmpeg[_0x29eca7(0x181)+'Path'](ffprobePath);const accessKey=process[_0x29eca7(0x1b2)][_0x29eca7(0x198)+_0x29eca7(0x183)],secretKey=process[_0x29eca7(0x1b2)]['QINIU_SECR'+'ET_KEY'],bucket=process[_0x29eca7(0x1b2)][_0x29eca7(0x19c)+'ET'],mac=new qiniu['auth']['digest'][(_0x29eca7(0x19b))](accessKey,secretKey),config=new qiniu['conf']['Config'](),bucketManager=new qiniu['rs']['BucketMana'+(_0x29eca7(0x1ab))](mac,config),formUploader=new qiniu['form_up'][(_0x29eca7(0x191))+'er'](config),putExtra=new qiniu[(_0x29eca7(0x1a3))][(_0x29eca7(0x1a9))]();function uploadFile(_0x1ed8da,_0x3c697c){const _0x1b1ac1=_0x29eca7,_0x5d38d6={'jVXLU':function(_0x551519,_0xb6993a){return _0x551519(_0xb6993a);},'iAmpq':_0x1b1ac1(0x188),'qNxcq':_0x1b1ac1(0x195),'gFYfB':'$(bucket)'},_0x5c343e=new qiniu['rs'][(_0x1b1ac1(0x187))]({'scope':bucket+':'+_0x3c697c,'returnBody':JSON[_0x1b1ac1(0x186)]({'key':_0x5d38d6['iAmpq'],'hash':_0x1b1ac1(0x1b1),'fsize':_0x5d38d6['qNxcq'],'bucket':_0x5d38d6[_0x1b1ac1(0x1ac)],'name':_0x1b1ac1(0x18c)}),'expires':0xe10}),_0x410db2=_0x5c343e[_0x1b1ac1(0x1b5)+'n'](mac);return new Promise((_0x24060e,_0xc6a409)=>{const _0xf3a4d2=_0x1b1ac1;formUploader[_0xf3a4d2(0x18b)](_0x410db2,_0x3c697c,_0x1ed8da,putExtra,(_0x28e48a,_0x2c79af,_0x1c07f0)=>{if(_0x28e48a)return _0xc6a409(_0x28e48a);_0x5d38d6['jVXLU'](_0x24060e,_0x2c79af);});});}function getUploadToken(){const _0x41acc7=_0x29eca7,_0x2c53d2=new qiniu['rs'][(_0x41acc7(0x187))]({'scope':bucket,'expires':0xe10});return{'token':_0x2c53d2[_0x41acc7(0x1b5)+'n'](mac),'expireIn':0xe10};}function _0x3225(_0x1fa2f5,_0x1072bc){const _0x34c1d5=_0x1201();return _0x3225=function(_0x85f011,_0x3d8641){_0x85f011=_0x85f011-(0x2671+0x4*0x1c4+-0x2c01);let _0x37b386=_0x34c1d5[_0x85f011];if(_0x3225['yyBaLs']===undefined){var _0x2c9bfa=function(_0x4448a8){const _0x441dd4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2916bc='',_0xd7c961='';for(let _0x3db4ce=-0x8cb+0x14*-0x1bb+-0x1*-0x2b67,_0x451798,_0x1f8c8e,_0x418158=0xc32*-0x1+-0x15bf+-0x21f1*-0x1;_0x1f8c8e=_0x4448a8['charAt'](_0x418158++);~_0x1f8c8e&&(_0x451798=_0x3db4ce%(0x68a*-0x5+0x80d*-0x3+0x38dd*0x1)?_0x451798*(-0x2546+0x20ac+-0x45*-0x12)+_0x1f8c8e:_0x1f8c8e,_0x3db4ce++%(0x9a+-0x14ba+-0x509*-0x4))?_0x2916bc+=String['fromCharCode'](-0x1*0x253b+-0xeca+0x3504&_0x451798>>(-(-0x1ac7+0x19c1*-0x1+0x348a)*_0x3db4ce&0x11*0x23+0x1ea9+0x1*-0x20f6)):0x16d8+-0x16c0+-0x2*0xc){_0x1f8c8e=_0x441dd4['indexOf'](_0x1f8c8e);}for(let _0x4f17f5=-0x501+-0x1380+0x99*0x29,_0x50ef45=_0x2916bc['length'];_0x4f17f5<_0x50ef45;_0x4f17f5++){_0xd7c961+='%'+('00'+_0x2916bc['charCodeAt'](_0x4f17f5)['toString'](0x1d5b+-0x13a5+0x9a6*-0x1))['slice'](-(-0x153e+-0x1a0a+0x2f4a));}return decodeURIComponent(_0xd7c961);};_0x3225['MMpPyj']=_0x2c9bfa,_0x1fa2f5=arguments,_0x3225['yyBaLs']=!![];}const _0x471805=_0x34c1d5[0x7*-0x43+0x3f4+-0x21f],_0x1330ea=_0x85f011+_0x471805,_0x4b638c=_0x1fa2f5[_0x1330ea];return!_0x4b638c?(_0x37b386=_0x3225['MMpPyj'](_0x37b386),_0x1fa2f5[_0x1330ea]=_0x37b386):_0x37b386=_0x4b638c,_0x37b386;},_0x3225(_0x1fa2f5,_0x1072bc);}function listFiles(_0x5c1eb4=''){return new Promise((_0xe7d585,_0x24f6fa)=>{const _0x3676a6=_0x3225,_0x14e5d6={'Zlipk':function(_0x39fb73,_0x44fef3){return _0x39fb73(_0x44fef3);}},_0x5dccc0={'prefix':_0x5c1eb4,'limit':0x3e8,'delimiter':''};bucketManager[_0x3676a6(0x1b6)](bucket,_0x5dccc0,(_0x5edfd4,_0x5c1da4,_0x2f1399)=>{const _0x495864=_0x3676a6;if(_0x5edfd4)return _0x14e5d6[_0x495864(0x1ae)](_0x24f6fa,_0x5edfd4);_0x14e5d6[_0x495864(0x1ae)](_0xe7d585,_0x5c1da4);});});}function deleteFile(_0x276a55){const _0x3fc886={'cPrur':function(_0x5329b2,_0x45bc17){return _0x5329b2(_0x45bc17);}};return new Promise((_0x53db06,_0x47bcf4)=>{const _0x14666f=_0x3225;bucketManager[_0x14666f(0x1a0)](bucket,_0x276a55,(_0x2db015,_0xc53074,_0x5c6a1a)=>{const _0x20157c=_0x14666f;if(_0x2db015)return _0x3fc886[_0x20157c(0x182)](_0x47bcf4,_0x2db015);_0x53db06(_0x5c6a1a);});});}async function deletePrefix(_0x678813){const _0xc8e96e=_0x29eca7,_0x2e7aa2=await listFiles(_0x678813),_0x5e2709=_0x2e7aa2['items']||[];if(_0x5e2709[_0xc8e96e(0x194)]===-0x1353+-0x5ce+0x7*0x397)return{'deleted':0x0};const _0x439c28=_0x5e2709['map'](_0x550e48=>qiniu['rs'][_0xc8e96e(0x1aa)](bucket,_0x550e48[_0xc8e96e(0x1a5)]));return new Promise((_0x27eac8,_0x781af)=>{const _0x26b95d=_0xc8e96e;bucketManager[_0x26b95d(0x1c1)](_0x439c28,(_0x40a2a6,_0x3b515e,_0x29eef1)=>{const _0x5c9d7d=_0x26b95d;if(_0x40a2a6)return _0x781af(_0x40a2a6);_0x27eac8({'deleted':_0x3b515e[_0x5c9d7d(0x194)],'body':_0x3b515e});});});}function _0x1201(){const _0x26c7f6=['56gU5l+D6kEg6Akr5Qc85BYp5Q2J56gU','56Es77Yb5B2t5yMn5PE26zw/oIa','5PYQ5OM+5yIW6kEg6Akr5Rwb','qgzMBxbLzY1PBG','nZy4nJa4mffzsKzUAq','mZi0nJmWmfvtCLDdwa','yMf0y2G','zMzWCM9Izq','BNn0ywXSzxiVzG','C2v0rMzWCM9Izq','y1bYDxi','u1nFs0vz','zMzWCM9IzsdPLjNOR68','Bg9N','C3rYAw5NAwz5','uhv0ug9SAwn5','jcHRzxKP','CgvN','ruLYAuu','Chv0rMLSzq','jcHMBMfTzsK','6kEg6Akr5ywd5PwW5O2UoG','BxbLzW','nJu1odLdD0fXu0C','mtqXota0ogPwsgriAa','rM9YBvvWBg9Hza','C3rYzwfTCW','D2LKDgG','BgvUz3rO','jcHMC2L6zsK','qgzMChjVyMuTAq','AgvPz2H0','uuLosvvFqundrq','zxHWB3j0CW','C2v0rMzTCgvNua','twfJ','uuLosvvFqLvdsW','77Yi5Q2J5PA55B2I77Yj','Cgf0Aa','yxrO','zgvSzxrL','zhvYyxrPB24','mJm5mde2mdvyve9MyMC','zM9YBv91Ca','DvnYyvm','A2v5','5Q2J5zYO5yIg5P6q6kEg6AkroIa','mtaWntC0neHOAgvzsq','mtu5ndC1nhvosvLvAW','uhv0rxH0CMe','zgvSzxrLt3a','z2vY','z0zzzKi','rePdtxi','wMXPCgS','zM9YBwf0','zNbYB2jL','jcHLDgfNkq','zw52','CM91BMq','BwvZC2fNzq','DxbSB2fKvg9Rzq','BgLZDfbYzwzPEa','5PEG5Rov5yIg5P6q6kEg6Akr5BgE5OcN77Ym6k+3','CwLUAxu','zMLUza','u2vnBhG'];_0x1201=function(){return _0x26c7f6;};return _0x1201();}function checkVideoProperties(_0x4521f2){const _0x462c65=_0x29eca7,_0x1112f7={'wHncI':_0x462c65(0x184)+':','YCDTY':_0x462c65(0x1b7)+_0x462c65(0x1bb),'fDTsa':'未知错误','EIriE':_0x462c65(0x18d),'DJCMr':function(_0x28c6a4,_0x4555ce){return _0x28c6a4(_0x4555ce);},'nVNrQ':_0x462c65(0x1bd),'SeMlx':function(_0x41f1cf,_0x36b1d3){return _0x41f1cf<=_0x36b1d3;},'uSraS':function(_0x1fb70a,_0xd5efbb){return _0x1fb70a-_0xd5efbb;},'glXRE':'视频比例必须为1:1'+_0x462c65(0x19d)};return new Promise((_0x356129,_0x39bbd4)=>{const _0x4b7ed5=_0x462c65;console[_0x4b7ed5(0x185)](_0x4b7ed5(0x1a6)+_0x4521f2),ffmpeg[_0x4b7ed5(0x1c2)](_0x4521f2,(_0x1972d8,_0x54f110)=>{const _0x35882e=_0x4b7ed5;if(_0x1972d8)return console['error'](_0x1112f7['wHncI'],_0x1972d8),_0x356129({'isValid':![],'error':_0x1112f7['YCDTY'],'details':_0x1972d8[_0x35882e(0x1b4)]||_0x1112f7['fDTsa']});console['log'](_0x1112f7[_0x35882e(0x18a)],JSON[_0x35882e(0x186)](_0x54f110,null,-0x55e+-0x1*0x1d91+0x22f1));const _0xd85998=_0x54f110[_0x35882e(0x192)][_0x35882e(0x1b9)](_0x124a2a=>_0x124a2a['codec_type']==='video');if(!_0xd85998)return _0x1112f7['DJCMr'](_0x356129,{'isValid':![],'error':_0x1112f7['nVNrQ']});const _0x2f245c=_0xd85998[_0x35882e(0x193)],_0x55ef56=_0xd85998[_0x35882e(0x197)],_0x1757d7=parseFloat(_0xd85998['duration']||_0x54f110[_0x35882e(0x1af)][_0x35882e(0x1a1)]||-0xcce+0x509*0x1+0x7c5),_0x4d5cc9=_0x2f245c/_0x55ef56,_0x4d585e=_0x1112f7[_0x35882e(0x1ba)](Math['abs'](_0x1112f7[_0x35882e(0x1a4)](_0x4d5cc9,-0x1307+0x1529+-0x221)),0x233*-0xb+-0x1f*0xbf+-0x7e3*-0x6+0.01),_0x135c90=_0x1757d7<=-0xfb*0xb+0x1589*-0x1+-0x3*-0xada;_0x1112f7[_0x35882e(0x1ad)](_0x356129,{'isValid':_0x4d585e&&_0x135c90,'width':_0x2f245c,'height':_0x55ef56,'duration':_0x1757d7,'aspectRatio':_0x4d5cc9,'error':!_0x4d585e?_0x1112f7['glXRE']:!_0x135c90?'视频时长不能超过60'+_0x35882e(0x1bc)+Math[_0x35882e(0x1b3)](_0x1757d7)+'秒':null});});});}module[_0x29eca7(0x199)]={'uploadFile':uploadFile,'getUploadToken':getUploadToken,'listFiles':listFiles,'deleteFile':deleteFile,'deletePrefix':deletePrefix,'checkVideoProperties':checkVideoProperties};