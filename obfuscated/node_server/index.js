const _0x482848=_0x2dbb;(function(_0x293b68,_0x4c12a4){const _0x95f870=_0x2dbb,_0x9e6ac2=_0x293b68();while(!![]){try{const _0x3f9712=-parseInt(_0x95f870(0x25e))/(0xef*-0x10+0xc80+0x19*0x19)+-parseInt(_0x95f870(0x1fc))/(-0x1*-0x1803+-0x2*0x149+-0x156f)+parseInt(_0x95f870(0x1d8))/(0x308+0x15*0x167+-0x2078)+-parseInt(_0x95f870(0x204))/(0x338+0x257c+0x4*-0xa2c)*(parseInt(_0x95f870(0x20c))/(0x1bda+0x7bf+0x18c*-0x17))+parseInt(_0x95f870(0x1ea))/(0x2117+0x91e+-0x2a2f*0x1)+parseInt(_0x95f870(0x1d6))/(0xa*-0x72+-0x1*-0x682+-0x207)*(parseInt(_0x95f870(0x212))/(0x1e02+-0xd*0x241+-0xad))+-parseInt(_0x95f870(0x1e5))/(-0x1*0x21d+-0x1ba5+0x1dcb)*(-parseInt(_0x95f870(0x1f2))/(0x10c8+-0x3ce*-0x7+-0x10*0x2b6));if(_0x3f9712===_0x4c12a4)break;else _0x9e6ac2['push'](_0x9e6ac2['shift']());}catch(_0x257c14){_0x9e6ac2['push'](_0x9e6ac2['shift']());}}}(_0x2634,-0x1*-0xa161f+-0xa5ab8+0x9cbf8));const express=require(_0x482848(0x269)),cors=require(_0x482848(0x277)),multer=require(_0x482848(0x1d2)),path=require(_0x482848(0x1de)),fs=require('fs'),{v4:uuidv4}=require(_0x482848(0x1fd)),qiniu=require(_0x482848(0x276)),{loginAndSaveCookie,uploadImportFile}=require(_0x482848(0x21f)),{requestAIContent,buildWordLibraryPrompt}=require(_0x482848(0x1eb)),app=express();function _0x2dbb(_0x531010,_0x29b1ab){const _0x19f978=_0x2634();return _0x2dbb=function(_0x3924e3,_0x10ba30){_0x3924e3=_0x3924e3-(0xe5c+0xe10+-0x7*0x3ce);let _0x42d752=_0x19f978[_0x3924e3];if(_0x2dbb['FtgLCA']===undefined){var _0x539d4d=function(_0x5b2f96){const _0xc510c4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1f72cd='',_0x48b5f6='';for(let _0x316e08=-0x1404*0x1+0x8e*-0x8+0x1874*0x1,_0x4dc297,_0x2a8456,_0x290c57=-0x19*0xb6+0x25c*-0x10+0x3786;_0x2a8456=_0x5b2f96['charAt'](_0x290c57++);~_0x2a8456&&(_0x4dc297=_0x316e08%(-0x2*0x164+-0x1c25+0x1ef1)?_0x4dc297*(0x73e+0x829+-0xf27)+_0x2a8456:_0x2a8456,_0x316e08++%(-0x1006+-0x129b+0x7*0x4f3))?_0x1f72cd+=String['fromCharCode'](-0x200+-0x1231+0xe2*0x18&_0x4dc297>>(-(-0x2603+0x1a5*0x9+0x1738)*_0x316e08&0x16e+-0x171+0x9)):0x152d+0x36*0x61+-0x273*0x11){_0x2a8456=_0xc510c4['indexOf'](_0x2a8456);}for(let _0x919d41=0xa31*0x1+0x1399+-0x6*0x4f7,_0x1ac845=_0x1f72cd['length'];_0x919d41<_0x1ac845;_0x919d41++){_0x48b5f6+='%'+('00'+_0x1f72cd['charCodeAt'](_0x919d41)['toString'](0x1893+-0x9ca+-0xeb9))['slice'](-(-0x127f+0x3*-0x78d+0x2928));}return decodeURIComponent(_0x48b5f6);};_0x2dbb['bePYff']=_0x539d4d,_0x531010=arguments,_0x2dbb['FtgLCA']=!![];}const _0x5243e5=_0x19f978[-0x841*0x2+0x825+0x85d*0x1],_0x55667f=_0x3924e3+_0x5243e5,_0x1c343e=_0x531010[_0x55667f];return!_0x1c343e?(_0x42d752=_0x2dbb['bePYff'](_0x42d752),_0x531010[_0x55667f]=_0x42d752):_0x42d752=_0x1c343e,_0x42d752;},_0x2dbb(_0x531010,_0x29b1ab);}app[_0x482848(0x1ff)](cors({'origin':!![]})),app[_0x482848(0x1ff)](express[_0x482848(0x23c)]()),app[_0x482848(0x1ff)](express[_0x482848(0x1ec)]({'extended':!![]}));const port=-0x1347+0x1fb+0x1d68,tempDir=path['join'](__dirname,_0x482848(0x1f4));!fs[_0x482848(0x1df)](tempDir)&&fs[_0x482848(0x283)](tempDir,{'recursive':!![]});const storage=multer['diskStorag'+'e']({'destination':function(_0x57bf63,_0x1fad6e,_0x5a17a0){_0x5a17a0(null,tempDir);},'filename':function(_0x59881d,_0x1082dd,_0x2a8c20){const _0x52205d=_0x482848,_0x12200c={'jpnud':function(_0x4b3cf8,_0xbc8735,_0x2c9f25){return _0x4b3cf8(_0xbc8735,_0x2c9f25);}},_0x460d79=uuidv4(),_0x178826=path[_0x52205d(0x221)](_0x1082dd[_0x52205d(0x215)+'me']);_0x12200c['jpnud'](_0x2a8c20,null,''+_0x460d79+_0x178826);}}),videoFilter=(_0x537a19,_0x139778,_0x567c26)=>{const _0x48c5a0=_0x482848,_0x348c89={'ieONp':function(_0x1db931,_0x595b5e,_0x3ccdf4){return _0x1db931(_0x595b5e,_0x3ccdf4);}};_0x139778[_0x48c5a0(0x240)][_0x48c5a0(0x1cd)](_0x48c5a0(0x28a))?_0x567c26(null,!![]):_0x348c89[_0x48c5a0(0x211)](_0x567c26,new Error('只允许上传视频文件!'),![]);},upload=multer({'storage':storage,'fileFilter':videoFilter,'limits':{'fileSize':(-0xa0*0xb+-0x25a+-0x99e*-0x1)*(-0xa3e+0x7a+0xdc4)*(0x52f*-0x7+0x25d2*0x1+0x277)}})[_0x482848(0x206)](_0x482848(0x246));function _0x2634(){const _0x5eb295=['mtCXndu5ouX2rgnssG','BM93','C2HVCe1HCa','l3zHCMLHDgLVBG','shDLueO','Ahr0Chm6lY93DW','Cgf0Aa','zxHPC3rZu3LUyW','DMLKzw9ZlW','C2L6zq','CxvLCNK','4P2mioIoT+wpLIbZAg9Wtq','qNr4wg4','mtmWnZa0m1rRy2T3EG','C3vJy2vZCW','l2XPC3q','5lIk5lYG5AsX6lsL77Ym5PYQ6i635y+w5yIWia','BgLZDezPBgvZ','nJmWodq1nfv4tMzLtW','lI9HAunSAwvUDa','DxjSzw5JB2rLza','l2DLBMvYyxrLlq','B29RAwu','zxjYB3i','yNjJzu0','BI9QC29Uo2nOyq','mtbhEMjgy28','yxaG5AsX6lsL77YA','DgvTCa','qwzzswi','ChjVAMvJDe5HBq','5Q2J5zYO6AQm6k+b6k6+5Ashtufd5zYW','5PcC57sI5yIg57g75AsX6lsL','CM0TDxjSzw5JBW','mda4mW','z29YEs9HDhrYAq','mJmZnda1ofLqvfjltW','DxvPza','B3j5swqGzxjYBW','DxnL','s0PNswe','zgvV','BwvZC2fNzq','ndq0mczJyxrLzW','mti4nty1mLbfD1nfrq','uuLosvvFre9nqq','C2LUz2XL','z29YEuLK','v1PvuwG','lMPZB24','uMjsvhq','4P2miowXNUAaP+IVT+AXGUwKSEI0PtO','nwfOsgPPCa','57Y65Bcr5lId54MB5lQr5z+F5zcn6ywn572Uka','l2r4Bs9JAgvJAW','BwKUy29Tl2fWAq','mZCUmZy','AwvptNa','mJuZnZi3mKniBM5uwa','nJyYndq0ma','l2r4Bs91CgXVyq','B3jPz2LUywXUyq','yxbWBgLJyxrPBW','l3bKzgTQq2f0zq','5z2aoIa','BvjSywm','5PYQ55+L6zsz6k+V77YA5PYQ6l+u5zUEiem','AenHDgvNB3j5lG','yxnWzwn0uMf0Aq','55M75B2v5AsX6lsL','ienOCM9Tzs8XmW','lI9KEg0','Dg9vChbLCKnHCW','zxH0BMfTzq','wenqC0O','l3rLBxuVy2HVAq','yM9KEq','vKXQC28','yMfZzw5HBwu','ChjLzML4','ufPAyKe','DxrLCW','l2zLDgnOq2f0zq','57Y65Bcrig1Hy0fKzhi','l2nOzwnR','y2f0zwDVCNLjza','l2rLBgv0zs1KAq','zujOBva','C2HVCeLKpty2mG','q25xz0C','mcaOv2LUzg93CW','zhvYyxrPB24','Cg9ZDa','z2v0vxbSB2fKva','qNzUrhm','AxPOv00','CMLLCW','8j+FOIboB2rLigjHyW','l2DLDej5q2f0zq','Bg9N','ANnVBG','DgHLBG','z29YEs9ZzwfYyW','z29YEq','BwLTzxr5Cgu','6BUy6k6K6kEe5Qc8','ndaWodm','yxjLBNrjzd0','l2nHDgvNB3j5qq','6i635y+w5AsX6lsL','zMLSzq','Ahr0Chm6lY9JAa','5O6i5P2d5OIq5yQF','tuPOEKC','C3rHy2S','zeLTCg9YDa','CM91Dgu','5lIk5lYG5BYc5BI4','ie5uideWlJa7ia','5lId54MB5lQr5lIk5lYG5AsX6lsLoIa','zxnZlJe0nJqYnG','BxjPsMi','Cxv4tKy','l3vWBg9Hzc12Aq','EMTJyLy','tw5fvKu','CePgExO','l3vWBg9Hza','C29U','y2vuzw11tgLZDa','6kEg6Akr5BgE5OcNoG','yNv0zuXPC3qUAG','DhDRAuW','DY5KAwfUEgLHBW','nJa2nZi1zvLlzMPP','A2vUzcbYDw5UAq','y2f0y2G','sgDQAxO','q2f0zwDVCNLjza','zgvK','zvPAtgO','BxjAyM4','CgrKA2O','u3rHDhvZ','z2v0','zxHWCMvZCW','BMCGyxqGAhr0Ca','AeP5ALK','54Q25Ocb5P+L6k+I5AsX6lsL','ksbbChbSzvDLyG','l2rYywz0','jNnOB3bjzd0','l3vZzxjjBMzVlG','z29YEs9SAxn0lG','6i635y+w5BgE5OcN5AsX6lsL','revkswi','zxrcEvbSyxrMBW','55sF5OIq5AsX6lsL77Ym6k+356In5zco6yEn6k+v','lI9XAw5PDq','y29YCW','CNnLDd1vveyToa','tw96AwXSys81lG','C3rHDhvZ','zxngCwS','v2LUnJq7ihG2na','BwKUy29Tl3DLyG','s2L0lZuZnY4ZnG','z29YEuf0DhjPyG','D2LKDgG','l29MzMXPBMu','BI94lxD3DY1MBW','BwTKAxjtEw5J','l3nLyxjJAenHDa','5lId54MB5lQr5lIk5lYG5AsX6lsLoG','D29Yzc1SAwjYyq','tuvhqxu','yxbWzw5K','BMfTzq','DMLKzw8V','z29YEs9NzxrcEq','BgLZDgvU','z0HHuNO','Dw5SAw5Ru3LUyW','DxbSB2fKrMLSzq','w0fjievYCM9Yxq','C3rYAw5NAwz5','l2DLDc10B2TLBG','C3rHCNrZv2L0Aa','ywXS','AxnwywXPza','zxnZlMPZB24','l2nOzwnRuhjVyW','BxvSDgvY','CNjxt1y','uhjVCgvYDgLLCW','l2r4BvnOB3bnyq','mJfcAxbODNG','ue9tva'];_0x2634=function(){return _0x5eb295;};return _0x2634();}app[_0x482848(0x268)](_0x482848(0x1cc),(_0x1c051a,_0x4bdf40)=>{const _0x3655d0=_0x482848,_0x2d105a=qiniu[_0x3655d0(0x235)+'oken']();_0x4bdf40['json'](_0x2d105a);}),app[_0x482848(0x268)](_0x482848(0x22c),async(_0x1ba162,_0x4014e0)=>{const _0x322838=_0x482848,_0x3ad82f={'jKTSU':_0x322838(0x22b)+'ess\x20参数','NAQbb':function(_0x3a1aeb,_0x5cf6ad,_0xf047c0){return _0x3a1aeb(_0x5cf6ad,_0xf047c0);},'mriJb':function(_0x5a2d19,_0x4b92d0){return _0x5a2d19+_0x4b92d0;},'WZUQh':_0x322838(0x247)+'eckmacaddr'+_0x322838(0x250)+'3252.worke'+'rs.dev/?ma'+'c=','eZZLj':'GET','AfYIb':_0x322838(0x248),'BvnDs':'授权失败'},{macAddress:_0x173d79}=_0x1ba162['query'];console[_0x322838(0x23b)](_0x322838(0x1f7)+_0x322838(0x218)+_0x173d79);if(!_0x173d79)return _0x4014e0[_0x322838(0x27a)](-0x941*-0x1+-0x486+0x32b*-0x1)[_0x322838(0x23c)]({'success':![],'message':_0x3ad82f['jKTSU']});try{const _0x4fc63f=await _0x3ad82f['NAQbb'](fetch,_0x3ad82f[_0x322838(0x251)](_0x3ad82f[_0x322838(0x208)],_0x173d79),{'method':_0x3ad82f[_0x322838(0x264)]})['then'](_0x58bc69=>_0x58bc69['json']())[_0x322838(0x260)](_0x2eda51=>{const _0x354e91=_0x322838;console[_0x354e91(0x23b)](_0x2eda51);});_0x4fc63f['success']?_0x4014e0[_0x322838(0x23c)]({'success':!![],'message':_0x3ad82f[_0x322838(0x1f5)]}):_0x4014e0['json']({'success':![],'message':_0x3ad82f[_0x322838(0x236)]});}catch(_0x1921f0){_0x4014e0[_0x322838(0x23c)]({'success':![],'message':'授权失败'});}}),app[_0x482848(0x268)](_0x482848(0x1e7),async(_0x2a10a4,_0x3d7747)=>{const _0x31bfe2=_0x482848,_0x19a4c1=_0x2a10a4[_0x31bfe2(0x1e2)][_0x31bfe2(0x227)]||'';try{const _0x1bfa01=await qiniu[_0x31bfe2(0x1e9)](_0x19a4c1);_0x3d7747[_0x31bfe2(0x23c)]({'success':!![],'result':_0x1bfa01});}catch(_0xf2e4c5){_0x3d7747['status'](0x98*-0x11+0xaad*0x2+0x18d*-0x6)[_0x31bfe2(0x23c)]({'success':![],'error':_0xf2e4c5[_0x31bfe2(0x202)]});}}),app['post']('/dxmCookie',async(_0x2bbf42,_0x304f80)=>{const _0x5c1bb0=_0x482848,_0x9794c2={'ZpOLW':function(_0x15c79a,_0x50244a,_0x32970f){return _0x15c79a(_0x50244a,_0x32970f);},'zkcbV':_0x5c1bb0(0x21d)},{username:_0x56636b,password:_0x3ca7d0}=_0x2bbf42[_0x5c1bb0(0x224)];try{const _0x13742a=await _0x9794c2['ZpOLW'](loginAndSaveCookie,_0x56636b,_0x3ca7d0);_0x13742a?_0x304f80[_0x5c1bb0(0x23c)]({'success':!![],'cookies':_0x13742a}):_0x304f80[_0x5c1bb0(0x27a)](0x1*0x8d5+-0x1*-0x128c+-0x19d0)['json']({'success':![],'message':_0x5c1bb0(0x21a)+_0x5c1bb0(0x1ee)});}catch(_0x453c01){console[_0x5c1bb0(0x1ef)]('❌\x20登录失败：',_0x453c01[_0x5c1bb0(0x202)]),_0x304f80[_0x5c1bb0(0x27a)](-0x53*-0x21+-0x1*-0x24c3+-0x1d2*0x19)['json']({'success':![],'message':_0x9794c2[_0x5c1bb0(0x254)],'reason':_0x453c01['message']});}}),app['post'](_0x482848(0x1d5)+'p',async(_0x14659f,_0x30bf62)=>{const _0x9bbe91=_0x482848,_0x53ecf6={'rZuqj':_0x9bbe91(0x1dd)+_0x9bbe91(0x25d)+_0x9bbe91(0x27d)+_0x9bbe91(0x223)+_0x9bbe91(0x259)+_0x9bbe91(0x26e),'eBhmP':'Mozilla/5.'+_0x9bbe91(0x232)+_0x9bbe91(0x24e)+_0x9bbe91(0x27c)+_0x9bbe91(0x26d)+_0x9bbe91(0x27e)+_0x9bbe91(0x21e)+'6\x20Safari/5'+_0x9bbe91(0x210)},{cookie:_0xad5f50}=_0x14659f[_0x9bbe91(0x224)];if(!_0xad5f50)return _0x30bf62[_0x9bbe91(0x27a)](0x376+-0x645+-0x175*-0x3)['json']({'success':![],'message':'缺少\x20cookie\x20'+'参数'});try{const _0x416d7a=await fetch(_0x9bbe91(0x1dd)+'w.dianxiao'+_0x9bbe91(0x20f)+_0x9bbe91(0x270)+_0x9bbe91(0x23c),{'headers':{'cookie':_0xad5f50,'referer':_0x53ecf6['rZuqj'],'user-agent':_0x53ecf6[_0x9bbe91(0x22f)]}}),{data:_0x4064b9}=await _0x416d7a[_0x9bbe91(0x23c)](),_0x29ef15=_0x4064b9?.[_0x9bbe91(0x1da)];let _0x2ed0fa=[];for(const _0x5dce4c in _0x29ef15){if(_0x29ef15[_0x5dce4c]['id']){let _0x9e2fb8={'id':_0x29ef15[_0x5dce4c]['id'],'name':_0x29ef15[_0x5dce4c][_0x9bbe91(0x289)]};_0x2ed0fa['push'](_0x9e2fb8);}}_0x30bf62[_0x9bbe91(0x23c)]({'success':!![],'shop':_0x2ed0fa});}catch(_0x2a7a1e){console[_0x9bbe91(0x1ef)](_0x9bbe91(0x1e3)+_0x9bbe91(0x1f3),_0x2a7a1e[_0x9bbe91(0x202)]),_0x30bf62['status'](-0x2055+-0xda6+-0x2fef*-0x1)[_0x9bbe91(0x23c)]({'success':![],'message':_0x9bbe91(0x245),'reason':_0x2a7a1e[_0x9bbe91(0x202)]});}}),app[_0x482848(0x234)](_0x482848(0x214)+_0x482848(0x24b),async(_0x584b7d,_0x2107c1)=>{const _0x1d33b9=_0x482848,_0x361302={'izhWM':function(_0x15a9b8,_0x4de8cd){return _0x15a9b8(_0x4de8cd);},'MJhzG':'上传成功','hJyjY':_0x1d33b9(0x1e8)+_0x1d33b9(0x1fd),'HwePJ':_0x1d33b9(0x24d)},{cookie:_0x2434ff,filePath:_0x13e9c0,shopId:_0x174073}=_0x584b7d['body'];try{const _0x2d630d=await _0x361302[_0x1d33b9(0x237)](uploadImportFile,{'cookie':_0x2434ff,'filePath':_0x13e9c0,'shopId':_0x174073});_0x2d630d[_0x1d33b9(0x1e6)]?_0x2107c1[_0x1d33b9(0x23c)]({'success':!![],'uuid':_0x2d630d[_0x1d33b9(0x1fd)],'message':_0x361302[_0x1d33b9(0x249)]}):_0x2107c1['status'](0x2214+0x1*0x78+-0x2098)['json']({'success':![],'message':_0x361302[_0x1d33b9(0x26b)]});}catch(_0x2cd6d3){_0x2107c1['status'](0x1f56+-0x10c4+0xa*-0x143)[_0x1d33b9(0x23c)]({'success':![],'message':_0x361302[_0x1d33b9(0x1dc)],'error':_0x2cd6d3['message']});}}),app[_0x482848(0x234)](_0x482848(0x20e)+_0x482848(0x267),async(_0x3c09e3,_0x4eb12a)=>{const _0x44b814=_0x482848,_0x41ce39={'XCPsJ':function(_0x5e9d87,_0x4a7aba,_0x5b9752){return _0x5e9d87(_0x4a7aba,_0x5b9752);},'CnWgG':_0x44b814(0x1dd)+_0x44b814(0x25d)+_0x44b814(0x20f)+_0x44b814(0x1d1)+_0x44b814(0x1d0),'quxNF':_0x44b814(0x1dd)+_0x44b814(0x25d)+_0x44b814(0x27d)+'/temu/choi'+_0x44b814(0x259)+_0x44b814(0x281),'twkiL':_0x44b814(0x279)+_0x44b814(0x232)+_0x44b814(0x24e)+_0x44b814(0x27c)+_0x44b814(0x26d)+_0x44b814(0x27e)+_0x44b814(0x21e)+'6\x20Safari/5'+_0x44b814(0x210),'pJFyz':_0x44b814(0x26c)},{cookie:_0x40c217,uuid:_0x1eb771}=_0x3c09e3['body'];try{const _0x3e7292=new URLSearchParams();_0x3e7292[_0x44b814(0x288)](_0x44b814(0x1fd),_0x1eb771);const _0x5f0a5c=await _0x41ce39[_0x44b814(0x222)](fetch,_0x41ce39[_0x44b814(0x231)],{'method':_0x44b814(0x1d7),'headers':{'content-type':_0x44b814(0x216)+_0x44b814(0x282)+_0x44b814(0x1f9)+_0x44b814(0x263),'cookie':_0x40c217,'referer':_0x41ce39[_0x44b814(0x252)],'user-agent':_0x41ce39[_0x44b814(0x25c)]},'body':_0x3e7292}),_0x1e5dae=await _0x5f0a5c['json']();_0x4eb12a[_0x44b814(0x23c)]({'success':!![],'result':_0x1e5dae});}catch(_0x303238){_0x4eb12a['status'](-0xa66+0x159c+0x18b*-0x6)['json']({'success':![],'message':_0x41ce39[_0x44b814(0x256)],'error':_0x303238[_0x44b814(0x202)]});}}),app[_0x482848(0x234)](_0x482848(0x257),async(_0x41007a,_0x2a0c1b)=>{const _0x4bc31a=_0x482848,{localPath:_0x2c0c87,key:_0x2e4943}=_0x41007a[_0x4bc31a(0x224)];try{const _0x41410d=await qiniu[_0x4bc31a(0x28f)](_0x2c0c87,_0x2e4943);_0x2a0c1b[_0x4bc31a(0x23c)]({'success':!![],'result':_0x41410d});}catch(_0x46d905){_0x2a0c1b['status'](0x1*0x14e9+-0xbed+-0x48*0x19)[_0x4bc31a(0x23c)]({'success':![],'error':_0x46d905[_0x4bc31a(0x202)]});}}),app[_0x482848(0x234)](_0x482848(0x253)+_0x482848(0x201),(_0x5be084,_0x32a371)=>{const _0x558b89={'esFqk':function(_0x477d96,_0x30769c){return _0x477d96 instanceof _0x30769c;}};upload(_0x5be084,_0x32a371,async function(_0x16af7d){const _0x2643c3=_0x2dbb;if(_0x558b89[_0x2643c3(0x27b)](_0x16af7d,multer['MulterErro'+'r']))return _0x32a371['status'](0x1799+-0x9d6+-0x15b*0x9)['json']({'success':![],'message':'上传错误:\x20'+_0x16af7d['message']});else{if(_0x16af7d)return _0x32a371['status'](-0x3a2+-0x3*0x60d+0x17bd)[_0x2643c3(0x23c)]({'success':![],'message':'服务器错误:\x20'+_0x16af7d['message']});}if(!_0x5be084[_0x2643c3(0x246)])return _0x32a371[_0x2643c3(0x27a)](-0x14d5*0x1+-0xac1+-0x1093*-0x2)[_0x2643c3(0x23c)]({'success':![],'message':'没有上传文件'});try{const _0xc9ef00=await qiniu['checkVideo'+_0x2643c3(0x1d4)](_0x5be084['file']['path']);console['log'](_0x2643c3(0x25a),_0xc9ef00);if(!_0xc9ef00[_0x2643c3(0x1cf)])return fs[_0x2643c3(0x28e)](_0x5be084['file'][_0x2643c3(0x1de)]),_0x32a371['status'](0xd32+0xc1*0x17+-0x1cf9)[_0x2643c3(0x23c)]({'success':![],'message':_0xc9ef00[_0x2643c3(0x1ef)]});const _0x47da89=_0x5be084['body'][_0x2643c3(0x1f6)+'e']||'default',_0x488b98=_0x5be084[_0x2643c3(0x224)]['specName']||_0x2643c3(0x241),_0x43edc2=Date[_0x2643c3(0x1d9)](),_0x1a2729=path[_0x2643c3(0x221)](_0x5be084['file'][_0x2643c3(0x215)+'me']),_0x445d29=_0x2643c3(0x1e0)+_0x47da89+'/'+_0x488b98+'_'+_0x43edc2+_0x1a2729,_0x3ff4bd=await qiniu[_0x2643c3(0x28f)](_0x5be084[_0x2643c3(0x246)]['path'],_0x445d29);fs[_0x2643c3(0x28e)](_0x5be084['file'][_0x2643c3(0x1de)]);const _0x43c410=process['env'][_0x2643c3(0x205)+'IN'];if(!_0x43c410)throw new Error(_0x2643c3(0x20d)+'QINIU_DOMA'+'IN)');const _0x442f33=_0x43c410+'/'+_0x445d29;_0x32a371[_0x2643c3(0x23c)]({'success':!![],'url':_0x442f33,'key':_0x445d29,'fileName':path[_0x2643c3(0x226)](_0x445d29),'originalName':_0x5be084[_0x2643c3(0x246)][_0x2643c3(0x215)+'me'],'size':_0x5be084['file'][_0x2643c3(0x1e1)],'metadata':{'width':_0xc9ef00[_0x2643c3(0x280)],'height':_0xc9ef00['height'],'duration':_0xc9ef00[_0x2643c3(0x233)],'aspectRatio':_0xc9ef00[_0x2643c3(0x21c)+'o']}});}catch(_0xd9130f){_0x5be084[_0x2643c3(0x246)]&&fs[_0x2643c3(0x1df)](_0x5be084[_0x2643c3(0x246)]['path'])&&fs[_0x2643c3(0x28e)](_0x5be084['file'][_0x2643c3(0x1de)]),console[_0x2643c3(0x1ef)](_0x2643c3(0x285),_0xd9130f),_0x32a371['status'](0x74d+0x154f+-0x2*0xd54)[_0x2643c3(0x23c)]({'success':![],'message':_0x2643c3(0x24f)+_0xd9130f[_0x2643c3(0x202)]});}});}),app[_0x482848(0x234)]('/delete',async(_0x3038af,_0x586a06)=>{const _0x138ea6=_0x482848,{key:_0x409936}=_0x3038af[_0x138ea6(0x224)];try{const _0x357d34=await qiniu['deleteFile'](_0x409936);_0x586a06[_0x138ea6(0x23c)]({'success':!![],'result':_0x357d34});}catch(_0x3229b7){_0x586a06[_0x138ea6(0x27a)](-0xe5b+-0x5*0x17b+0x4be*0x5)[_0x138ea6(0x23c)]({'success':![],'error':_0x3229b7['message']});}}),app['post'](_0x482848(0x22e)+'r',async(_0x5096ff,_0x5e5ca7)=>{const _0x422256=_0x482848,{prefix:_0x4f0b38}=_0x5096ff[_0x422256(0x224)];try{const _0x242e44=await qiniu['deletePref'+'ix'](_0x4f0b38);_0x5e5ca7[_0x422256(0x23c)]({'success':!![],'result':_0x242e44});}catch(_0x1662ee){_0x5e5ca7[_0x422256(0x27a)](-0xe38+0xade+0x54e)[_0x422256(0x23c)]({'success':![],'error':_0x1662ee['message']});}}),app[_0x482848(0x234)]('/fetchCate'+_0x482848(0x23f),async(_0x1605ce,_0x99d6aa)=>{const _0x5f0bee=_0x482848,_0x1d70ef={'bYxls':_0x5f0bee(0x1dd)+'w.dianxiao'+'mi.com/api'+_0x5f0bee(0x217)+_0x5f0bee(0x271)+_0x5f0bee(0x23c),'RbRTt':_0x5f0bee(0x1d7),'mRlac':_0x5f0bee(0x216)+_0x5f0bee(0x282)+'rm-urlenco'+'ded','jEEhd':'分类请求失败：'},{cookie:_0xc2e87a,categoryParentId:categoryParentId=''}=_0x1605ce['body'];try{const _0x287ea3=await fetch(_0x1d70ef['bYxls'],{'method':_0x1d70ef[_0x5f0bee(0x20a)],'headers':{'Content-Type':_0x1d70ef[_0x5f0bee(0x219)],'Cookie':_0xc2e87a},'body':'shopId=654'+_0x5f0bee(0x1fa)+(categoryParentId?'&categoryP'+_0x5f0bee(0x243)+categoryParentId:'')}),_0x52b45e=await _0x287ea3[_0x5f0bee(0x23c)]();_0x99d6aa['json']({'success':!![],'data':_0x52b45e});}catch(_0x4f1d94){console['error'](_0x1d70ef['jEEhd'],_0x4f1d94),_0x99d6aa[_0x5f0bee(0x27a)](0x1899*0x1+-0x341*0xb+0xd26)['json']({'success':![],'message':'请求分类失败','error':_0x4f1d94[_0x5f0bee(0x202)]});}}),app[_0x482848(0x234)](_0x482848(0x23a)+_0x482848(0x207),async(_0x32132f,_0x2e932c)=>{const _0x45fc5e=_0x482848,_0x153900={'FPKyi':'categoryId'+'\x20is\x20requir'+'ed','DEJIb':'https://ww'+_0x45fc5e(0x25d)+_0x45fc5e(0x20f)+_0x45fc5e(0x217)+_0x45fc5e(0x28b)+_0x45fc5e(0x262)+_0x45fc5e(0x209),'KJgIa':function(_0x3ec500,_0x3980c0){return _0x3ec500||_0x3980c0;}},{categoryId:_0x508982,cookie:_0x1557c4}=_0x32132f['body'];if(!_0x508982)return _0x2e932c[_0x45fc5e(0x27a)](-0x208d+0x1efd+0x320)[_0x45fc5e(0x23c)]({'error':_0x153900['FPKyi']});try{const _0x815159=await fetch(_0x153900[_0x45fc5e(0x273)],{'method':_0x45fc5e(0x1d7),'headers':{'Content-Type':'applicatio'+'n/x-www-fo'+_0x45fc5e(0x1f9)+_0x45fc5e(0x263),'Cookie':_0x153900[_0x45fc5e(0x200)](_0x1557c4,'')},'body':_0x45fc5e(0x22d)+'='+_0x508982+('&shopId=65'+_0x45fc5e(0x242))}),_0x4005ab=await _0x815159['json']();_0x2e932c[_0x45fc5e(0x23c)]({'success':!![],'data':_0x4005ab});}catch(_0x5220c5){console['error']('getByCateg'+_0x45fc5e(0x1fe)+'r:',_0x5220c5),_0x2e932c['status'](0x6f*0x4e+0x1d93+-0x3d71)[_0x45fc5e(0x23c)]({'success':![],'error':_0x5220c5[_0x45fc5e(0x202)]});}}),app[_0x482848(0x234)](_0x482848(0x284)+'egory',async(_0x2b6911,_0x2be879)=>{const _0x200b01=_0x482848,_0x57f6eb={'MEGAu':function(_0x172a87,_0x5c4669,_0x2beb69){return _0x172a87(_0x5c4669,_0x2beb69);},'BtxXn':_0x200b01(0x216)+_0x200b01(0x282)+_0x200b01(0x1f9)+'ded','VLjso':function(_0xb4fb9e,_0x322b89){return _0xb4fb9e(_0x322b89);},'rrWOV':_0x200b01(0x1f8)},{cookie:_0x6d921b,category:_0x58dcaa}=_0x2b6911['body'];try{const _0x5bdd1f=await _0x57f6eb[_0x200b01(0x287)](fetch,_0x200b01(0x1dd)+_0x200b01(0x25d)+'mi.com/api'+'/pddkjCate'+_0x200b01(0x23e)+_0x200b01(0x21b)+_0x200b01(0x23c),{'method':_0x200b01(0x1d7),'headers':{'Content-Type':_0x57f6eb[_0x200b01(0x1e4)],'Cookie':_0x6d921b},'body':_0x200b01(0x230)+_0x200b01(0x203)+'ory='+_0x57f6eb[_0x200b01(0x225)](encodeURIComponent,_0x58dcaa)}),_0x1468e9=await _0x5bdd1f[_0x200b01(0x23c)]();_0x2be879['json'](_0x1468e9);}catch(_0x402560){_0x2be879[_0x200b01(0x27a)](-0x131*0x2+-0x19d9+0x1e2f)[_0x200b01(0x23c)]({'success':![],'message':_0x57f6eb[_0x200b01(0x1d3)],'error':_0x402560[_0x200b01(0x202)]});}}),app['post'](_0x482848(0x22a)+_0x482848(0x27f)+_0x482848(0x229),async(_0x58ffd9,_0x6efc21)=>{const _0x4da300=_0x482848,_0x2270ad={'huNfr':_0x4da300(0x213),'PZZbA':function(_0x3ed874,_0x38c452,_0x3a1a87){return _0x3ed874(_0x38c452,_0x3a1a87);},'giLfR':_0x4da300(0x216)+_0x4da300(0x1f1)+_0x4da300(0x278),'mrZbn':function(_0x53e1dc,_0x5f49b8){return _0x53e1dc(_0x5f49b8);},'brceM':'https://ww'+'w.dianxiao'+_0x4da300(0x20f)+_0x4da300(0x217)+_0x4da300(0x28b)+_0x4da300(0x262)+'.json','gHaRz':'POST','MnEVE':_0x4da300(0x1dd)+'w.dianxiao'+_0x4da300(0x20f)+_0x4da300(0x1db)+'Template/c'+'om/pddkj/g'+_0x4da300(0x274)+'rm.json'},{cookie:_0x2edbb4,categoryId:_0x3c7fe1}=_0x58ffd9[_0x4da300(0x224)],_0x1cd17f={'Content-Type':_0x4da300(0x216)+_0x4da300(0x282)+_0x4da300(0x1f9)+_0x4da300(0x263),'Cookie':_0x2edbb4},_0x5a2ff4=_0x2270ad['huNfr'];try{const [_0x299cf8,_0x3decce,_0x270aaa,_0xf2bcc1]=await Promise[_0x4da300(0x1ce)]([_0x2270ad[_0x4da300(0x228)](fetch,_0x4da300(0x1dd)+_0x4da300(0x25d)+_0x4da300(0x20f)+_0x4da300(0x244)+'ttrMatch/g'+'etCategory'+'Attr.json',{'method':_0x4da300(0x1d7),'headers':{'Content-Type':_0x2270ad['giLfR'],'Cookie':_0x2edbb4},'body':JSON[_0x4da300(0x1cb)]({'platform':_0x4da300(0x266),'categoryId':_0x2270ad[_0x4da300(0x265)](String,_0x3c7fe1)})})[_0x4da300(0x23d)](_0x1f5080=>_0x1f5080['json']())[_0x4da300(0x260)](_0x41fdfb=>{const _0x307c91=_0x4da300;console[_0x307c91(0x23b)](_0x41fdfb);}),fetch(_0x2270ad[_0x4da300(0x1f0)],{'method':_0x2270ad[_0x4da300(0x28d)],'headers':_0x1cd17f,'body':_0x4da300(0x22d)+'='+_0x3c7fe1+_0x4da300(0x26f)+_0x5a2ff4})['then'](_0xc79252=>_0xc79252['json']())[_0x4da300(0x260)](_0x158b0e=>{const _0xe4d014=_0x4da300;console[_0xe4d014(0x23b)](_0x158b0e);}),_0x2270ad[_0x4da300(0x228)](fetch,_0x4da300(0x1dd)+_0x4da300(0x25d)+'mi.com/api'+'/pddkjCate'+_0x4da300(0x1fb)+_0x4da300(0x25b)+_0x4da300(0x258),{'method':_0x4da300(0x1d7),'headers':_0x1cd17f,'body':_0x4da300(0x22d)+'='+_0x3c7fe1+_0x4da300(0x26f)+_0x5a2ff4})[_0x4da300(0x23d)](_0x18c937=>_0x18c937[_0x4da300(0x23c)]())['catch'](_0x18de2c=>{console['log'](_0x18de2c);}),_0x2270ad[_0x4da300(0x228)](fetch,_0x2270ad[_0x4da300(0x255)],{'method':_0x2270ad[_0x4da300(0x28d)],'headers':_0x1cd17f,'body':'sizeCatego'+'ry='+_0x3c7fe1})[_0x4da300(0x23d)](_0x43a668=>_0x43a668['json']())['catch'](_0x2e8e28=>{const _0xb37f4c=_0x4da300;console[_0xb37f4c(0x23b)](_0x2e8e28);})]);_0x6efc21[_0x4da300(0x23c)]({'success':!![],'data':{'attrMatch':_0x299cf8,'categoryDetail':_0x3decce,'attributeList':_0x270aaa,'variationTemplate':_0xf2bcc1}});}catch(_0x59328d){console[_0x4da300(0x1ef)](_0x4da300(0x20b),_0x59328d['message']),_0x6efc21['status'](0x1d5f*-0x1+-0x5c*-0x28+0x10f3)[_0x4da300(0x23c)]({'success':![],'message':_0x4da300(0x272),'error':_0x59328d[_0x4da300(0x202)]});}}),app['post'](_0x482848(0x1ed)+_0x482848(0x286)+_0x482848(0x238),async(_0x3120b8,_0x53486a)=>{const _0x155577=_0x482848,_0x59db0c={'Hgjiz':'产品名称不能为空','KpjEP':function(_0x205b1a,_0x2154f0){return _0x205b1a(_0x2154f0);},'ZrdBj':_0x155577(0x275)},{productName:_0x5ea764,image:image='',aiType:_0x5444e3,instruction:_0x14abc6}=_0x3120b8[_0x155577(0x224)];if(!_0x5ea764)return _0x53486a['status'](0x20f*-0x8+-0x229e+0x34a6)['json']({'success':![],'message':_0x59db0c[_0x155577(0x261)]});const _0x3c9299=_0x59db0c['KpjEP'](buildWordLibraryPrompt,{'productName':_0x5ea764,'imageBase64':image,'aiType':_0x5444e3,'instruction':_0x14abc6});try{const _0x58aea5=await requestAIContent(_0x5444e3,_0x3c9299);_0x53486a[_0x155577(0x23c)]({'success':!![],'data':_0x58aea5});}catch(_0x465280){console[_0x155577(0x1ef)](_0x155577(0x1ca),_0x465280[_0x155577(0x202)]),_0x53486a[_0x155577(0x27a)](-0x149a*0x1+-0x3*-0xb69+0x31*-0x3d)[_0x155577(0x23c)]({'success':![],'message':_0x59db0c['ZrdBj']});}}),app[_0x482848(0x28c)](port,()=>{const _0x56422a=_0x482848;console[_0x56422a(0x23b)](_0x56422a(0x239)+_0x56422a(0x25f)+_0x56422a(0x26a)+'://localho'+'st:'+port),app['router'][_0x56422a(0x24a)]['forEach'](_0x46dc3f=>{const _0x3f703f=_0x56422a;_0x46dc3f['route']&&console[_0x3f703f(0x23b)](_0x46dc3f['route'][_0x3f703f(0x24a)][0x47*0x11+0x18f5+-0x1dac]['method'][_0x3f703f(0x220)+'e']()+'\x20'+_0x46dc3f[_0x3f703f(0x24c)][_0x3f703f(0x1de)]);});});